<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è–èª•å€’æ•¸æœˆæ›† â€” 2025/12</title>
<style>
  :root{
    --bg:#0b1b2b; --card:#0f2a44; --accent:#f2c94c;
    --muted:#9fb3c8; --today:#7ee0a6;
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans TC","Helvetica Neue",Arial;}
  body{background:linear-gradient(180deg,#071428 0%, #082033 60%); color: #eaf6ff; display:flex; align-items:center; justify-content:center; padding:24px;}
  .wrap{width:100%; max-width:920px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border-radius:12px; padding:20px; box-shadow:0 6px 30px rgba(2,8,23,0.6); border:1px solid rgba(255,255,255,0.03)}
  header{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:12px}
  h1{font-size:20px;margin:0}
  .sub{color:var(--muted); font-size:13px}
  .calendar{display:grid; grid-template-columns:repeat(7,1fr); gap:10px; margin-top:14px}
  .weekday{font-size:12px; text-align:center; color:var(--muted)}
  .day{
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border-radius:8px; padding:14px; min-height:84px; display:flex; flex-direction:column; justify-content:flex-start; align-items:flex-start;
    cursor:default; position:relative; border:1px solid rgba(255,255,255,0.03);
  }
  .day.locked{opacity:0.45}
  .day.today{border:1px solid var(--today); box-shadow:0 4px 18px rgba(126,224,166,0.08); transform:translateY(-2px); cursor:pointer;}
  .num{font-weight:700; font-size:18px; margin-bottom:8px}
  .open-btn{margin-top:auto; align-self:stretch; text-align:center; padding:8px 10px; border-radius:6px; background:rgba(255,255,255,0.03); color:var(--accent); font-weight:600; font-size:13px; border:1px dashed rgba(255,255,255,0.03)}
  .open-btn.disabled{opacity:0.4}
  .footer{margin-top:14px; display:flex; justify-content:space-between; align-items:center; gap:12px; color:var(--muted); font-size:13px}
  /* modal */
  .modal-back{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(2,6,13,0.5), rgba(2,6,13,0.75)); z-index:40}
  .modal{background:var(--card); padding:20px; border-radius:12px; width:calc(100% - 48px); max-width:520px; box-shadow:0 12px 50px rgba(2,8,23,0.7); border:1px solid rgba(255,255,255,0.04)}
  .modal h2{margin:0 0 8px 0}
  .modal p{margin:0 0 12px 0; color:var(--muted)}
  .close{background:transparent; border:0; color:var(--accent); font-weight:700; cursor:pointer}
  /* access denied */
  .deny{display:flex; align-items:center; justify-content:center; padding:48px; text-align:center; gap:12px; flex-direction:column}
  .small{font-size:13px; color:var(--muted)}
  @media (max-width:640px){
    .day{min-height:72px;padding:10px}
    .num{font-size:16px}
  }
</style>
</head>
<body>
<div class="wrap" id="app">
  <header>
    <div>
      <h1>è–èª•å€’æ•¸æœˆæ›† â€” 2025 / 12</h1>
      <div class="sub">é»é–‹ã€Œä»Šå¤©ã€çš„æ—¥æœŸä¾†æŸ¥çœ‹ç¦®ç‰©ã€‚éç•¶å¤©ç„¡æ³•é–‹å•Ÿã€‚</div>
    </div>
    <div class="sub" id="accessInfo">å­˜å–æª¢æŸ¥ä¸­â€¦</div>
  </header>

  <div id="contentArea">
    <!-- éŠ€å¹•ä¸Šæœƒç”Ÿæˆæœˆæ›† -->
    <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
      <div class="sub">èªè¨€ï¼šä¸­æ–‡ï¼ˆç¹é«”ï¼‰</div>
      <div class="sub">æˆæ¬Šæ–¹å¼ï¼šç¶²å€ token</div>
    </div>

    <div style="margin-top:12px; display:grid; gap:8px;">
      <div style="display:grid; grid-template-columns:repeat(7,1fr); gap:10px;">
        <div class="weekday">æ—¥</div><div class="weekday">ä¸€</div><div class="weekday">äºŒ</div><div class="weekday">ä¸‰</div><div class="weekday">å››</div><div class="weekday">äº”</div><div class="weekday">å…­</div>
      </div>
      <div class="calendar" id="calendar"></div>
    </div>

    <div class="footer">
      <div class="small">æç¤ºï¼šä½ å¯ä»¥æŠŠ token åŠ åœ¨ç¶²å€å¾Œï¼ˆ?token=...ï¼‰çµ¦æƒ³è¦é–‹çš„äººã€‚</div>
      <div class="small">å»ºè­°ï¼šä¸Šç·šå‰è«‹è‡ªè¡Œæ›´æ”¹ç¨‹å¼å…§çš„ SECRETã€‚</div>
    </div>
  </div>

  <!-- access denied view (hidden by default) -->
  <div id="denyView" style="display:none;">
    <div class="deny">
      <h2>å­˜å–è¢«æ‹’</h2>
      <div class="small">éœ€è¦æ­£ç¢ºçš„ token æ‰èƒ½æª¢è¦–æ­¤æœˆæ›†ã€‚è«‹ç¢ºèªç¶²å€åŒ…å«æ­£ç¢ºçš„ ?token=YOUR_SECRET</div>
    </div>
  </div>
</div>

<!-- modal -->
<div class="modal-back" id="modalBack">
  <div class="modal" role="dialog" aria-modal="true">
    <h2 id="modalTitle">ç¦®ç‰©</h2>
    <p id="modalDesc">å…§æ–‡</p>
    <div style="display:flex; justify-content:flex-end; gap:8px;">
      <button class="close" id="closeBtn">é—œé–‰</button>
    </div>
  </div>
</div>

<script>
/*
  ç°¡å–®ä½¿ç”¨èªªæ˜ï¼š
  - å°‡æ­¤æª”ä¸Šå‚³åˆ°éœæ…‹ç©ºé–“ï¼ˆæˆ–ç›´æ¥æ‰“é–‹æª”æ¡ˆæ¸¬è©¦ï¼‰ã€‚
  - å¿…é ˆåœ¨ç¶²å€å¸¶ tokenï¼Œä¾‹å¦‚ï¼š index.html?token=SECRET_VALUE
  - åœ¨ç¨‹å¼ç¢¼ä¸­ä¿®æ”¹ SECRET èˆ‡ gifts å…§å®¹ä»¥ç¬¦åˆä½ çš„éœ€æ±‚ã€‚
*/

// ========== åƒæ•¸ï¼ˆä¸Šç·šå‰è«‹æ”¹æ­¤ SECRETï¼‰ ==========
const SECRET = '20251221'; // <-- æ”¹æˆè‡ªå·±çš„å¯†é‘°
// å¦‚æœå¸Œæœ›æ›´ä¸å®¹æ˜“è¢«çŒœåˆ°ï¼Œè«‹æ”¹æˆä¸€ä¸²é•·å­—ä¸²
// ç¯„ä¾‹ï¼š 'xY7!hb3-abc-2025-12'

// ç¦®ç‰©æè¿°ï¼šæŠŠæ¯ä¸€å¤©è¦é¡¯ç¤ºçš„å…§å®¹æ”¾åœ¨é€™è£¡ï¼ˆä»¥ 1..31 çš„æ•¸å­—ç•¶ key ï¼‰
// ä½ å¯ä»¥è‡ªè¡Œä¿®æ”¹æˆ–æ“´å……æ–‡å­— / HTMLï¼ˆç›®å‰ç‚ºç´”æ–‡å­—ï¼‰
const gifts = {
  1: 'å°é©šå–œï¼šè–èª•å¸½è²¼åœ–ä¹™å¼µ',
  2: 'æº«é¦¨å°èªï¼šä»Šå¤©å°è‡ªå·±èªªä¸€å¥ã€Œä½ å¾ˆæ£’ã€',
  3: 'å°ä»»å‹™ï¼šåšä¸‰åˆ†é˜ä¼¸å±•é‹å‹•',
  4: 'ç”œé»æç¤ºåˆ¸ï¼šä¸€æ¯ç†±å¯å¯æŠµç”¨åˆ¸ï¼ˆè™›æ“¬ï¼‰',
  5: 'æ’­æ”¾æ¸…å–®ï¼šæ¨è–¦ä¸€é¦–ç¯€æ—¥æ­Œçµ¦ä½ ',
  6: 'æš–å¿ƒå¡ç‰‡ï¼šä¸€æ®µç¥ç¦æ–‡å­—',
  7: 'å°éŠæˆ²ï¼šè©¦è‘—ç•«ä¸€é¡†è–èª•æ¨¹',
  8: 'DIYï¼šä»Šæ™šåšç°¡å–®é¤…ä¹¾ï¼ˆé£Ÿè­œé™„è¨»ï¼‰',
  9: 'æ¡Œé¢èƒŒæ™¯ï¼šé€ä½ ä¸€å¼µç¯€æ—¥æ¡Œå¸ƒï¼ˆå¯ä¸‹è¼‰ï¼‰',
 10: 'æŠ˜æ‰£åˆ¸ï¼ˆæ¨¡æ“¬ï¼‰ï¼šä¸‹æ¬¡è³¼ç‰© 5% æŠ˜æ‰£',
 11: 'å½±ç‰‡æ¨è–¦ï¼šä¸€éƒ¨é©åˆè–èª•çš„çŸ­ç‰‡',
 12: 'æ‰‹å¯«æç¤ºï¼šå¯«ä¸€å°æ„Ÿè¬å¡çµ¦æœ‹å‹',
 13: 'æ”¾é¬†ç·´ç¿’ï¼š5 åˆ†é˜å‘¼å¸ç·´ç¿’',
 14: 'æ•…äº‹æ™‚é–“ï¼šä¸€æ®µçŸ­å°çš„è–èª•æ•…äº‹',
 15: 'ç…§ç‰‡ä»»å‹™ï¼šæ‹ä¸€å¼µä»Šå¤©è®“ä½ å¾®ç¬‘çš„ç…§ç‰‡',
 16: 'ç§˜å¯†å¤©ä½¿ï¼šé€çµ¦ä»Šå¤©é‡åˆ°çš„äººä¸€å¥å¥½è©±',
 17: 'ç¯€æ—¥å°çŸ¥è­˜ï¼šè–èª•è€äººçš„èµ·æºç°¡ä»‹',
 18: 'æ‰‹å·¥ï¼šåšä¸€å€‹ç°¡å–®çš„ç¦®ç‰©æ¨™ç±¤',
 19: 'éŸ³æ¨‚ï¼šæ¨è–¦ä¸€é¦–æº«æš–æ­Œæ›²',
 20: 'é›»å½±ä¹‹å¤œå»ºè­°ï¼šä¸€éƒ¨å®¶åº­é›»å½±æ¸…å–®',
 21: 'å¤œé–“å„€å¼ï¼šæ³¡ä¸€æ¯ç†±èŒ¶æ”¾é¬†ä¸€ä¸‹',
 22: 'å›é¡§ï¼šå¯«ä¸‹ä»Šå¹´ä¸‰ä»¶è®“ä½ æ„Ÿè¬çš„äº‹',
 23: 'è¨ˆåŠƒï¼šç‚ºæ˜å¹´è¨­å®šä¸€å€‹å°ç›®æ¨™',
 24: 'å¹³å®‰å¤œé©šå–œï¼šç‰¹åˆ¥ç¥ç¦èˆ‡å°åœ–æ¡ˆ',
 25: 'è–èª•å¿«æ¨‚ï¼ä»Šå¤©çš„ç¦®ç‰©ï¼šä¸€å¼µå°ˆå±¬ç¥ç¦å¡ï¼ˆç¥ä½ å¿«æ¨‚ï¼‰',
 26: 'ç¯€å¾Œæ”¾é¬†ï¼šå»ºè­°ä»Šå¤©å¥½å¥½ä¼‘æ¯',
 27: 'å›é¥‹æ—¥ï¼šå°ä¸€ä½æœ‹å‹èªªã€Œè¬è¬ã€',
 28: 'æ•´ç†å°ä»»å‹™ï¼šæ¸…ç†ä¸€å€‹å°è§’è½',
 29: 'æœªä¾†ä¿¡ï¼šå¯«ä¸€æ®µçµ¦æœªä¾†è‡ªå·±çš„è©±',
 30: 'æ”å½±æ—¥ï¼šæ‹ä¸€å¼µå†¬å­£ä¸»é¡Œç…§ç‰‡',
 31: 'è·¨å¹´å°æé†’ï¼šæº–å‚™æ˜å¹´æ—¥æ›†æˆ–è¨ˆç•«æœ¬'
};

// ========== å­˜å–æ§åˆ¶ ==========
function getQueryParam(name){
  const u = new URL(location.href);
  return u.searchParams.get(name);
}
const token = getQueryParam('token') || '';
const allowed = token === SECRET;

// ========== ç•«é¢æ§åˆ¶ ==========
const app = document.getElementById('app');
const contentArea = document.getElementById('contentArea');
const denyView = document.getElementById('denyView');
const accessInfo = document.getElementById('accessInfo');

if(!allowed){
  // é¡¯ç¤ºè¢«æ‹’ç•«é¢
  contentArea.style.display = 'none';
  denyView.style.display = 'block';
  app.appendChild(denyView);
  accessInfo.textContent = 'å­˜å–ï¼šå¤±æ•—';
} else {
  accessInfo.textContent = 'å­˜å–ï¼šå…è¨±ï¼ˆå·²å¸¶ tokenï¼‰';
  buildCalendar();
}

// ========== å»ºæœˆæ›†ï¼ˆ2025/12ï¼‰ ==========
function buildCalendar(){
  const cal = document.getElementById('calendar');
  cal.innerHTML = '';

  // ç›®æ¨™å¹´æœˆï¼š2025 å¹´ 12 æœˆ
  const year = 2025, month = 12; // month: 1..12
  const first = new Date(year, month-1, 1);
  const last = new Date(year, month, 0); // last day of month
  const daysInMonth = last.getDate();

  // ç•¶åœ°æ—¥æœŸï¼ˆä½¿ç”¨ä½¿ç”¨è€…çš„æœ¬åœ°æ™‚é–“ä½œç‚ºã€Œä»Šå¤©ã€åˆ¤æ–·ï¼‰
  const now = new Date();
  const todayYear = now.getFullYear();
  const todayMonth = now.getMonth() + 1;
  const todayDate = now.getDate();

  // è¨ˆç®—ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå¹¾ï¼ˆ0 = æ—¥ ... 6 = å…­ï¼‰
  const startWeekday = first.getDay();

  // åœ¨æ—¥æ›†å‰è£œç©ºæ ¼
  for(let i=0;i<startWeekday;i++){
    const empty = document.createElement('div');
    empty.className = 'day locked';
    empty.style.visibility = 'hidden';
    cal.appendChild(empty);
  }

  // ç”¢ç”Ÿæ¯ä¸€å¤©çš„æ ¼å­
  for(let d=1; d<=daysInMonth; d++){
    const cell = document.createElement('div');
    cell.className = 'day';
    const num = document.createElement('div');
    num.className = 'num';
    num.textContent = d;
    cell.appendChild(num);

    // ç°¡çŸ­æç¤ºï¼ˆå¯è‡ªè¡Œä¿®æ”¹ï¼‰
    const hint = document.createElement('div');
    hint.style.fontSize='13px';
    hint.style.color='var(--muted)';
    hint.style.marginTop='4px';
    hint.textContent = gifts[d] ? gifts[d].slice(0,28) + (gifts[d].length>28 ? 'â€¦' : '') : '';
    cell.appendChild(hint);

    // åˆ¤æ–·æ˜¯å¦ç‚ºç•¶å¤©ï¼ˆä¸”ç‚º 2025/12ï¼‰
    const isToday = (todayYear === year && todayMonth === month && todayDate === d);

    if(isToday){
      cell.classList.add('today');
      // æŒ‰éˆ•
      const btn = document.createElement('div');
      btn.className = 'open-btn';
      btn.textContent = 'é–‹å•Ÿä»Šå¤©ç¦®ç‰© ğŸ';
      btn.addEventListener('click', ()=> openGift(d));
      cell.appendChild(btn);
    } else {
      cell.classList.add('locked');
      const btn = document.createElement('div');
      btn.className = 'open-btn disabled';
      btn.textContent = 'ä¸å¯é–‹å•Ÿ';
      // é»æ“Šé¡¯ç¤ºæç¤ºï¼šåªèƒ½é–‹ä»Šå¤©
      btn.addEventListener('click', ()=>{
        const message = (new Date(year, month-1, d) < new Date(todayYear, todayMonth-1, todayDate)) ?
          'åªèƒ½é–‹å•Ÿã€Œä»Šå¤©ã€çš„æ—¥æœŸï¼Œéå»çš„æ—¥æœŸç„¡æ³•é–‹å•Ÿã€‚' :
          'åªèƒ½é–‹å•Ÿã€Œä»Šå¤©ã€çš„æ—¥æœŸï¼Œæœªä¾†çš„æ—¥æœŸç„¡æ³•é–‹å•Ÿã€‚';
        alert(message);
      });
      cell.appendChild(btn);
    }

    // åŠ åˆ°æ—¥æ›†
    cal.appendChild(cell);
  }
}

// ========== modal æ§åˆ¶ ==========
const modalBack = document.getElementById('modalBack');
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const closeBtn = document.getElementById('closeBtn');

function openGift(day){
  // åªæœ‰åœ¨ allowed ä¸” ç¢ºèªæ˜¯ä»Šå¤©ï¼ˆç‚ºå®‰å…¨èµ·è¦‹å†æª¢æŸ¥ï¼‰
  const now = new Date();
  if(!(now.getFullYear()===2025 && (now.getMonth()+1)===12 && now.getDate()===day)){
    alert('åªèƒ½é–‹å•Ÿä»Šå¤©çš„æ—¥æœŸã€‚');
    return;
  }
  // å–å¾—ç¦®ç‰©æ–‡å­—
  const text = gifts[day] || 'ä»Šå¤©çš„ç¦®ç‰©å°šæœªè¨­å®šã€‚';
  modalTitle.textContent = `12/${String(day).padStart(2,'0')} çš„ç¦®ç‰©`;
  modalDesc.textContent = text;
  modalBack.style.display = 'flex';
}

closeBtn.addEventListener('click', ()=> { modalBack.style.display = 'none'; });

// é»èƒŒæ™¯ä¹Ÿå¯é—œé–‰
modalBack.addEventListener('click', (e)=>{
  if(e.target === modalBack) modalBack.style.display = 'none';
});

// åˆå§‹ï¼šå¦‚æœç¾åœ¨ä¸æ˜¯ 2025/12ï¼Œæ‰€æœ‰æ ¼å­éƒ½æœƒæ˜¯é–å®šï¼ˆä½¿ç”¨è€…æœƒçœ‹åˆ°ä¸èƒ½é–‹å•Ÿï¼‰
(function showNoticeIfNotDec2025(){
  const now = new Date();
  if(!(now.getFullYear()===2025 && (now.getMonth()+1)===12)){
    const info = document.createElement('div');
    info.className = 'small';
    info.style.marginTop='12px';
    info.textContent = 'æ³¨æ„ï¼šä½ çš„æœ¬æ©Ÿæ—¥æœŸä¸æ˜¯ 2025/12ï¼ˆåªæœ‰æœ¬æœˆçš„ã€Œä»Šå¤©ã€å¯ä»¥é–‹å•Ÿï¼‰ã€‚è‹¥è¦æ¸¬è©¦è«‹æŠŠé›»è…¦æ—¥æœŸæ”¹ç‚º 2025/12 ã€‚';
    document.querySelector('.wrap').insertBefore(info, document.querySelector('.wrap').children[2]);
  }
})();
</script>
</body>
</html>
