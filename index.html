<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ğŸ‚ ç”Ÿæ—¥æœˆæ›† 2025</title>

<style>
/* ===== èƒŒæ™¯ï¼šè–èª•ç´…æ¼¸å±¤ + æŸ”å…‰ ===== */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Noto Sans TC", sans-serif;
  background: linear-gradient(145deg, #8b0000, #ff3b3b);
  color: white;
  padding: 1.5em 0;
  text-align: center;
  overflow-x: hidden;
  position: relative;
}

/* ===== é£„é›ªæ•ˆæœ ===== */
.snowflake {
  position: fixed;
  top: -10px;
  color: rgba(255,255,255,0.9);
  font-size: 1em;
  opacity: 0.9;
  animation: fall linear infinite;
  pointer-events: none;
}
@keyframes fall {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(100vh) rotate(360deg); }
}

/* ===== å¤§æ¨™é¡Œ ===== */
h1 {
  font-size: 1.9em;
  font-weight: 700;
  margin-top: 0.3em;
  text-shadow: 0px 4px 10px rgba(0,0,0,0.35);
}

/* ===== æœˆæ›†å®¹å™¨ï¼ˆApple Styleï¼‰ ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;

  width: 92vw;
  max-width: 420px;
  margin: 1.2em auto 0;

  background: rgba(255,255,255,0.22);
  padding: 10px 12px;
  border-radius: 18px;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 22px rgba(0,0,0,0.35);

  animation: fadeUp .7s ease-out;
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ===== é€±æ¨™é¡Œ ===== */
.weekday {
  font-size: 0.78em;
  color: #ffeaea;
  font-weight: 600;
}

/* ===== ä¸€èˆ¬æ—¥æœŸ ===== */
.day {
  background: white;
  border-radius: 12px;
  aspect-ratio: 1/1;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 1em;
  font-weight: 600;
  color: #b30000;

  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);

  transition: transform .15s ease, box-shadow .15s ease;
}
.day:hover {
  transform: scale(1.04);
  box-shadow: 0 3px 10px rgba(0,0,0,0.25);
}

/* ===== å‘¨æœ«æ›´ç´… ===== */
.weekend {
  color: #ff2b2b !important;
}

/* ===== å½ˆçª— ===== */
#modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.modal-box {
  background: white;
  color: #333;
  border-radius: 18px;
  padding: 26px;
  width: 80%;
  max-width: 320px;
  text-align: center;

  box-shadow: 0 8px 25px rgba(0,0,0,0.35);
  animation: fadeUp .28s ease-out;
}

.modal-box h2 {
  margin: 0;
  color: #b30000;
  font-weight: 700;
}

button {
  background: #b30000;
  border: none;
  padding: 8px 20px;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  margin-top: 10px;
  font-size: 0.9em;
  font-weight: 600;
}
button:active {
  background: #800000;
}

/* ===== Token éŒ¯èª¤ ===== */
.deny {
  margin-top: 5em;
  font-size: 1.1em;
}
</style>
</head>

<body>

<h1>ğŸ‚ ç”Ÿæ—¥æœˆæ›†ï¼ˆ2025 / 12ï¼‰</h1>
<div id="calendarContainer"></div>

<!-- ===== å½ˆçª— ===== -->
<div id="modal">
  <div class="modal-box">
    <h2 id="mTitle"></h2>
    <p id="mText"></p>
    <button onclick="closeModal()">é—œé–‰</button>
  </div>
</div>

<script>
/* ===== é£„é›ª ===== */
for (let i = 0; i < 30; i++) {
  const snow = document.createElement('div');
  snow.className = 'snowflake';
  snow.textContent = 'â„ï¸';
  snow.style.left = Math.random() * 100 + 'vw';
  snow.style.animationDuration = 4 + Math.random() * 6 + 's';
  snow.style.fontSize = (10 + Math.random() * 16) + 'px';
  document.body.appendChild(snow);
}

/* ===== Token èˆ‡è³‡æ–™ ===== */
const SECRET = "20251221";
let gifts = {};
const token = new URL(location.href).searchParams.get("token");

/* ===== è¼‰å…¥ gifts.json ===== */
fetch("gifts.json")
  .then(r => r.json())
  .then(data => {
    gifts = data;

    if (token !== SECRET) {
      document.body.innerHTML = '<div class="deny">âŒ Token éŒ¯èª¤ï¼Œç„¡æ³•ç€è¦½</div>';
    } else {
      buildCalendar();
    }
  })
  .catch(err => console.error("è®€å– gifts.json éŒ¯èª¤", err));

/* ===== å»ºæ§‹æœˆæ›† ===== */
function buildCalendar() {
  const container = document.getElementById("calendarContainer");
  const grid = document.createElement("div");
  grid.className = "grid";
  container.appendChild(grid);

  const weekdays = ["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"];
  weekdays.forEach((w, i) => {
    const e = document.createElement("div");
    e.className = "weekday";
    e.classList.add(i === 0 || i === 6 ? "weekend" : "");
    e.textContent = w;
    grid.appendChild(e);
  });

  const y = 2025, m = 11;
  const first = new Date(y, m, 1);
  const days = new Date(y, m + 1, 0).getDate();
  const start = first.getDay();

  for (let i = 0; i < start; i++) {
    grid.appendChild(document.createElement("div"));
  }

  for (let d = 1; d <= days; d++) {
    const cell = document.createElement("div");
    const date = new Date(y, m, d);
    const isWeekend = date.getDay() === 0 || date.getDay() === 6;

    cell.className = "day";
    if (isWeekend) cell.classList.add("weekend");

    cell.textContent = d;
    cell.onclick = () => openGift(d);

    grid.appendChild(cell);
  }
}

/* ===== å½ˆçª— ===== */
function openGift(d) {
  document.getElementById("mTitle").textContent = `12/${d} ğŸ`;
  document.getElementById("mText").textContent =
    gifts[d] || "é€™å¤©é‚„æ²’æœ‰ç‰¹åˆ¥å®‰æ’ ğŸ‰";

  document.getElementById("modal").style.display = "flex";
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}
</script>

</body>
</html>